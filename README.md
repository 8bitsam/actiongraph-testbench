### Initialization

1. Before running the scripts, first install the `actiongraph.py` file as a
   package. This can be done by running `pip install -e actiongraph` while in
   this directory.
2. Then, you can test to see if it works by running the Juptyer notebook in
   `example/`. This should convert two Materials Project synthesis reactions into
   ActionGraphs, then display the graphs.

### Creating Data Sets

1. Get a materials project API key
2. Place this key in a text file called `api-key.txt` in `utils/`
3. Run `fetch_synthesis_data.py` and then `filter_synthesis_data.py` in
   `utils/`. This will create data set 1 (raw Materials Project data).
4. Run `convert.py` in `ag-knn-test`. This will convert the first data set
   into serialized ActionGraphs and thus make data set 2.
5. Ensure the data sets match by running `remover.py` in `utils/`.

### Training Models

1. To run the model on data set 1, run the script `pipeline.py`
   in `knn-baseline/`. This will featurize the data, train, evaluate, and save
   the model.
2. To run the model on data set 2, first find the maximum number of nodes. To
   do this, run `find_max_nodes.py` in `utils/` and update the `MAX_NODES`
   variable in `ag-knn-test/featurize.py`. Then, run `pipeline.py` in
   `ag-knn-test/`.
3. To run the PCA experiment, simply run `run_pca_experiment.py` in
   `ag-knn-test/`. This will also save relevant plots.

### Visualizing Data

The visualizations can be generated by running the `visualize_features.py`
scripts in the respective folders for each model. The feature distributions
should be identical. The results will be saved within the `Data/` directory.
