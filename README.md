# Documentation for the ActionGraph Dataset and Benchmarks

See paper: "Representation of Inorganic Synthesis Reactions and Prediction: Graphical Framework and Datasets."

## Data Availability

The data set used in this paper can be obtained either directly by running the code (see the "Creating Data Sets" section). An alternative is to download it directly at [https://www.kaggle.com/datasets/samandrello/actiongraph-inorganic-synthesis](kaggle).

If you download it this way, ensure the data (`json` files) are placed directly at `Data/filtered-ag-data` (with the top-level directory being this repository).

## Running Code

### Initialization

1. Before running the scripts, first install the `actiongraph.py` file as a
   package. This can be done by running `pip install -e actiongraph` while in
   this directory. This will also install all requirements to run the scripts.
2. Then, you can test to see if it works by running the Juptyer notebook in
   `example/`. This should convert two Materials Project synthesis reactions into
   ActionGraphs, then display the graphs.

### Creating Data Sets

1. Create a Materials Project account and obtain an API key [here](https://next-gen.materialsproject.org/api).
2. Place this key in a text file called `api-key.txt` in `utils/`
3. Run `fetch_synthesis_data.py` and then `filter_synthesis_data.py` in
   `utils/`. This will create data set 1 (raw Materials Project data).
4. Run `convert.py` in `ag-knn-test`. This will convert the first data set
   into serialized ActionGraphs and thus make data set 2.
5. Ensure the data sets match by running `remover.py` in `utils/`.

### Training Models

1. To run the model on data set 1, run the script `pipeline.py`
   in `knn-baseline/`. This will featurize the data, train, evaluate, and save
   the model.
2. To run the model on data set 2, first find the maximum number of nodes. To
   do this, run `find_max_nodes.py` in `utils/` and update the `MAX_NODES`
   variable in `ag-knn-test/featurize.py`. Then, run `pipeline.py` in
   `ag-knn-test/`.
3. To run the PCA experiment, simply run `run_pca_experiment.py` in
   `ag-knn-test/`. This will also save relevant plots.

### Visualizing Data

The visualizations can be generated by running the `visualize_features.py`
scripts in the respective folders for each model. The feature distributions
should be identical. The results will be saved within the `Data/` directory.

## Data Source and Licensing

- The original data is sourced from the [Materials Project](https://materialsproject.org).
- The Materials Project data is licensed under the [Creative Commons Attribution 4.0 International License (CC BY 4.0)](https://creativecommons.org/licenses/by/4.0/).
- The code in this repository does **not** redistribute any Materials Project data. It only provides scripts to download, filter, and transform the data.

### Attribution

This project uses data from the Materials Project, which is licensed under [CC BY 4.0](https://creativecommons.org/licenses/by/4.0/).
The data used here has been filtered to remove unwanted synthesis reactions and transformed into ActionGraphs.

> Materials Project: A. Jain, S.P. Ong, G. Hautier, W. Chen, W.D. Richards, S. Dacek, S. Cholia, D. Gunter, D. Skinner, G. Ceder, and K.A. Persson. "The Materials Project: A materials genome approach to accelerating materials innovation." APL Materials 1, 011002 (2013). [https://materialsproject.org](https://materialsproject.org)

### License

- The code in this repository is licensed under the BSD 3-Clause License (see `LICENSE.rst`).
- Any data generated using this code and derived from Materials Project data must comply with the [CC BY 4.0](https://creativecommons.org/licenses/by/4.0/) license.
